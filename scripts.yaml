sonos_say:
  alias: "Sonos TTS script"
  sequence:
    - service: sonos.snapshot
      data_template:
        entity_id:
          - "{{ sonos_entity }}"
    - service: sonos.unjoin
      data_template:
        entity_id:
          - "{{ sonos_entity }}"
    - service: media_player.volume_set
      data_template:
        entity_id:
          - "{{ sonos_entity }}"
        volume_level: "{{ volume }}"
    - service: tts.amazon_polly_say
      data_template:
        entity_id:
          - "{{ sonos_entity }}"
        message: "{{ message }}"
        cache: "{{ cache|default(true) }}"
    - delay: "{{ delay }}"
    - service: sonos.restore
      data_template:
        entity_id:
          - "{{ sonos_entity }}"
heat_tesla:
  alias: "Heat Tesla"
  sequence:
    - service: climate.set_preset_mode
      data:
        entity_id: climate.i_c_e_hvac_climate_system
        preset_mode: defrost
    - service: climate.set_temperature
      data:
        entity_id: climate.i_c_e_hvac_climate_system
        temperature: 26
    - service: climate.turn_on
      data:
        entity_id: climate.i_c_e_hvac_climate_system
sonos_play_list:
  alias: "Play Sonos Playlist"
  sequence:
    - service: media_player.volume_set
      data_template:
        entity_id: all
        volume_level: "{{ volume|default(0.3) }}"
    - service: media_player.play_media
      data_template:
        entity_id: all
        media_content_id: {{ playlist }}
        media_content_type: playlist
    - service: media_player.shuffle_set
      data:
        entity_id: all
        shuffle: true
    - service: media_player.media_next_track
      data:
        entity_id: all
party:
  alias: Party
  sequence:
    - service: script.sonos_play_list
      data:
        playlist: Party