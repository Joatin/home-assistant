profile_card: &profile_card
  aspect_ratio: '1:1'
  state_filter:
    "not_home": grayscale(90%)
  show_name: false
  show_state: true
  type: picture-entity

profile_cards: &profile_cards
  type: horizontal-stack
  cards:
    - <<: *profile_card
      entity: person.joatin
      image: local/images/joatin.jpeg?v=1
      tap_action:
        action: call-service
        service: browser_mod.popup
        service_data:
          title: Joatin
          card:
            type: vertical-stack
            cards:
              - type: entities
                entities:
                  - sensor.iphone_battery_level_2
                  - sensor.joatins_ipad_battery_level
                  - sensor.silver_battery_state
                  - sensor.joatins_apple_watch_battery_state
              - type: horizontal-stack
                cards:
                  - type: button
                    name: Find iPhone
                    show_state: false
                    icon: mdi:cellphone
                    icon_height: 2em
                    tap_action:
                      action: call-service
                      service: icloud.play_sound
                      service_data:
                        account: granlundjoatin@icloud.com
                        device_name: iphone
                  - type: button
                    name: Find iPad
                    show_state: false
                    icon: mdi:tablet-ipad
                    icon_height: 2em
                    tap_action:
                      action: call-service
                      service: icloud.play_sound
                      service_data:
                        account: granlundjoatin@icloud.com
                        device_name: Joatin's iPad
                  - type: button
                    name: Find Watch
                    show_state: false
                    icon: mdi:watch
                    icon_height: 2em
                    tap_action:
                      action: call-service
                      service: icloud.play_sound
                      service_data:
                        account: granlundjoatin@icloud.com
                        device_name: Joatin's Watch
          deviceID:
            - this
            - dashboard
    - <<: *profile_card
      entity: person.caroline
      image: local/images/caroline.jpeg?v=1
      tap_action:
        action: call-service
        service: browser_mod.popup
        service_data:
          title: Caroline
          card:
            type: entities
            entities:
              - sensor.carolines_iphone_battery_level
              - sensor.carolines_apple_watch_battery_state
              - sensor.carolines_macbook_pro_battery_state
          deviceID:
            - this
            - dashboard

tesla_range: &tesla_range
  entity: sensor.i_c_e_range_sensor
  type: gauge
  name: Range
  title: I.C.E Battery Range
  unit: km
  min: 0
  max: 560
  severity:
    green: 112
    yellow: 56
    red: 0

tesla_heat: &tesla_heat
  type: button
  name: Heat Tesla
  show_state: true
  tap_action:
    action: call-service
    service: script.heat_tesla
  hold_action:
    action: toggle
  entity: climate.i_c_e_hvac_climate_system

download_mbit: &download_mbit
  entity: sensor.speedtest_download
  type: gauge
  name: Download
  title: Download Mbit/s
  unit: mbit/s
  min: 0
  max: 60
  severity:
    green: 40
    yellow: 10
    red: 0

title: Casita
resources:
  - url: https://cdn.jsdelivr.net/gh/bramkragten/weather-card/dist/weather-card.min.js
    type: module
  - url: local/lovelace/custom-header.js?v=1.7.9
    type: module
  - url: local/lovelace/button-card.js?v=0.0.1
    type: module
views:
  - badges: []
    title: Overview
    icon: mdi:home
    cards:
      - *profile_cards
      - entity: media_player.living_room
        type: media-control
      - type: horizontal-stack
        cards:
          - *tesla_range
          - *tesla_heat
      - entity: weather.smhi_home
        type: custom:weather-card
      - cards:
          - type: button
            name: Party
            show_state: false
            show_icon: true
            icon: mdi:emoticon-excited
            tap_action:
              action: call-service
              service: script.party
          - type: button
            name: Latin
            show_state: false
            show_icon: true
            icon: mdi:creation
            tap_action:
              action: call-service
              service: script.party
          - type: button
            name: Chill
            show_state: false
            show_icon: true
            icon: mdi:grill
            tap_action:
              action: call-service
              service: script.party
        type: horizontal-stack
      - type: custom:button-card
        entity: input_boolean.guest_mode
        icon: mdi:human-greeting
        color_type: card
        show_name: false
        show_state: true
        tap_action:
          action: toggle
      - *download_mbit
  - badges: []
    title: Lights
    icon: mdi:lamp
    cards:
  - badges: []
    title: Tesla
    icon: mdi:car
    cards:
      - cards:
          - *tesla_range
          - *tesla_heat
          - entities:
              - entity: lock.i_c_e_door_lock
              - entity: binary_sensor.i_c_e_charger_sensor
              - entity: climate.i_c_e_hvac_climate_system
            show_name: false
            title: I.C.E
            type: glance
          - entity: sensor.i_c_e_battery_sensor
            graph: line
            hours_to_show: 72
            type: sensor
        type: vertical-stack
  - badges: []
    title: Extra
    icon: mdi:gear
    cards:
      - *download_mbit