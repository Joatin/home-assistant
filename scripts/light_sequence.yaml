---

alias: Light Sequence
icon: mdi:bulb
description: |
  Flashes the lights in the provided sequence. Afterwards it
  restores the lights to their previous state.
mode: queued
max: 5
fields:
  rgb_color:
    description: The color to cycle through
    example: [100, 100, 255]
  entity_id:
    description: The lights that should be affected
    example: all
sequence:
  - service: scene.create
    data:
      scene_id: light_sequence_before
      snapshot_entities: "{{ entity_id }}"
  - service: light.turn_off
    data:
      entity_id: "{{ entity_id }}"
      flash: short
  - service: light.turn_on
    data:
      entity_id: "{{ entity_id }}"
      rgb_color: "{{ color }}"
      brightness: 255
      flash: short
  - service: light.turn_on
    data:
      entity_id: "{{ entity_id }}"
      rgb_color: [255, 255, 255]
      brightness: 255
      flash: short
  - service: light.turn_on
    data:
      entity_id: "{{ entity_id }}"
      rgb_color: "{{ color }}"
      brightness: 255
      flash: short
  - delay: 1
  - service: scene.turn_on
    data:
      entity_id: scene.light_sequence_before
